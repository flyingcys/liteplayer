## 1. Architecture Diagram

```
+-----------------------------------------------------------------------------------+
|                                   APPLICATION                                     |
|                                                                                   |
|    +---------------+  +---------------+  +---------------+  +---------------+     |
|    |   http url    |  |  local file   |  |  tts stream   |  |   playlist    |     |
|    +---------------+  +---------------+  +---------------+  +---------------+     |
+-----------------------------------------------------------------------------------+

+-----------------------------------------------------------------------------------+
|                                    LITEPLAYER                                     |
|                                                                                   |
|  +-----------------------------------------------------------------------------+  |
|  |                                     API                                     |  |
|  |                                                                             |  |
|  | +------------+ +------------+ +------------+ +------------+ +------------+  |  |
|  | |   create   | |   destroy  | |register_cb | | set_source | |   prepare  |  |  |
|  | +------------+ +------------+ +------------+ +------------+ +------------+  |  |
|  | +------------+ +------------+ +------------+ +------------+ +------------+  |  |
|  | |    start   | |   pause    | |   resume   | |    stop    | |    reset   |  |  |
|  | +------------+ +------------+ +------------+ +------------+ +------------+  |  |
|  +-----------------------------------------------------------------------------+  |
|                                                                                   |
|  +-----------------------------------------------------------------------------+  |
|  |                                     CORE                                    |  |
|  |                                                                             |  |
|  |  +---------------+  +---------------+  +---------------+  +--------------+  |  |
|  |  | media parser  |  | media source  |  | player manager|  |    debugger  |  |  |
|  |  +---------------+  +---------------+  +---------------+  +--------------+  |  |
|  |                                                                             |  |
|  |  +---------------------+  +---------------------+  +---------------------+  |  |
|  |  |       ESP ADF       |  |      COMPONENTS     |  |        COMMON       |  |  |
|  |  |  +---------------+  |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |  | audio pipeline|  |  |  |   extractor   |  |  |  |      OSAL     |  |  |  |
|  |  |  +---------------+  |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |  +---------------+  |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |  | audio element |  |  |  |    decoder    |  |  |  |   msglooper   |  |  |  |
|  |  |  +---------------+  |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |  +---------------+  |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |  |  audio event  |  |  |  |   resampler   |  |  |  |   msgqueue    |  |  |  |
|  |  |  +---------------+  |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |                     |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  |                     |  |  |      sink     |  |  |  |    ringbuf    |  |  |  |
|  |  |                     |  |  +---------------+  |  |  +---------------+  |  |  |
|  |  +---------------------+  +---------------------+  +---------------------+  |  |
|  +-----------------------------------------------------------------------------+  |
|                                                                                   |
|  +-----------------------------------------------------------------------------+  |
|  |                                  ADAPTER                                    |  |
|  |                                                                             |  |
|  | +---------------+  +---------------+  +---------------+  +---------------+  |  |
|  | |  file wrapper |  |  http wrapper |  | decode wrapper|  |  sink wrapper |  |  |
|  | +---------------+  +---------------+  +---------------+  +---------------+  |  |
|  +-----------------------------------------------------------------------------+  |
|                                                                                   |
+-----------------------------------------------------------------------------------+

+-----------------------------------------------------------------------------------+
|                               ADAPTER IMPLEMENTATION                              |
|                                                                                   |
|    +---------------+  +---------------+  +---------------+  +---------------+     |
|    |     fatfs     |  |   httpclient  |  |   mad/pvmp3   |  |   tinyalsa    |     |
|    +---------------+  +---------------+  +---------------+  +---------------+     |
|    +---------------+  +---------------+  +---------------+  +---------------+     |
|    |    littlefs   |  |      curl     |  |helixaac/fdkaac|  |   AudioTrack  |     |
|    +---------------+  +---------------+  +---------------+  +---------------+     |
|                                                                                   |
+-----------------------------------------------------------------------------------+
```

## 2. Demo Usage

- ./liteplayer_demo ./test.mp3
- ./liteplayer_demo ./test.m4a
- ./liteplayer_demo http://ailabsaicloudservice.alicdn.com/player/resources/23a2d715f019c0e345235f379fa26a30.mp3
